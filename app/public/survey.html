<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder: Survey</title>
    <!-- Link to the jQuery Library -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

    <!-- Including Font Awesome Icons -->
    <script src="https://use.fontawesome.com/b38c8ed4c7.js"></script>

    <!-- Link to reset stylesheet -->
    <link rel="stylesheet" href="css/reset.css">

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">

    <!-- Compiled and minified Materialize JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>

    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <div class="container">
        <div class="row">
            <h1>Friend Finder Survey</h1>
            <hr>
        </div>
        <div class="row">
            <h4>First, provide your name and a link to an image of you</h4>
            <form>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="name" class="form-control" id="name" placeholder="Jane Doe">
                </div>
                <div class="form-group">
                    <label for="image">Profile Picture</label>
                    <input type="link" class="form-control" id="profilePicture" placeholder="https://cdn.vectorstock.com/i/thumb-large/52/66/14065266.jpg">
                </div>
            </form>
            <hr>
        </div>
        <div class="row">
            <h4>Then, on a scale of 1 (strongly disagree) to 5 (strongly agree), please indicate your level of agreement with
                the following statements</h4>
            <br>
            <label for="question1">1. I have a vivid imagination</label>
            <select class="form-control" id="q1">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question2">2. I like to solve complex problems</label>
            <select class="form-control" id="q2">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question3">3. I dislike being the center of attention</label>
            <select class="form-control" id="q3">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question4">4. I try to follow the rules</label>
            <select class="form-control" id="q4">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question5">5. I am always on the go</label>
            <select class="form-control" id="q5">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question6">6. I believe that there is no absolute right and wrong</label>
            <select class="form-control" id="q6">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question7">7. I feel sympathy for those who are worse off than myself</label>
            <select class="form-control" id="q7">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question8">8. I am always prepared</label>
            <select class="form-control" id="q8">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question9">9. I value cooperation over competition</label>
            <select class="form-control" id="q9">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <label for="question10">10. I stick to my chosen path</label>
            <select class="form-control" id="q10">
                <option value="0"></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2 (disagree) </option>
                <option value="3">3 (neither agree nor disagree)</option>
                <option value="4">4 (agree)</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <br>
            <button type="submit" class="btn btn-info btn-md" id="confirm">SUBMIT</button>
        </div>
        <div class="modal fade" id="myModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">You've been matched with a friend!</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Your friend is...</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
		$(document).ready(function() {
			$('select').material_select();
			$('.modal').modal({
				dismissible: false, // Modal can be dismissed by clicking outside of the modal
				opacity: .5, // Opacity of modal background
				inDuration: 300, // Transition in duration
				outDuration: 200, // Transition out duration
				startingTop: '4%', // Starting top style attribute
				endingTop: '10%' // Ending top style attribute
			});
		});
		// Activate submit button
		$('#submitButton').on('click', function(event) {
			event.preventDefault();
			// Gather user inputs
			var userInput = {
				name: $('#userName').val().trim(),
				photo: $('#userPhoto').val().trim(),
				scores:[
					$('#question1').val().trim(),
					$('#question2').val().trim(),
					$('#question3').val().trim(),
					$('#question4').val().trim(),
					$('#question5').val().trim(),
					$('#question6').val().trim(),
					$('#question7').val().trim(),
					$('#question8').val().trim(),
					$('#question9').val().trim(),
					$('#question10').val().trim()
				]
			};
			// console.log('userInput = ' + JSON.stringify(userInput));
			// Add user inputs to friends list
			$.post('/api/friends', userInput)
      		.done(function(data) {
      			// console.log('response = ' + JSON.stringify(data));
      			// Set the name and image values of friend match
      			$('#userMatch').html(data.matchName);
		    	$("#userMatchImage").attr("src", data.matchImage);
		    	// Pop open the modal dialog
      			$('#modal1').modal('open');
      		});
		});
	</script>
</body>

</html>